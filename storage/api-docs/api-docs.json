{
    "openapi": "3.0.0",
    "info": {
        "title": "API Bancaire - Documentation Compl√®te",
        "description": "Documentation de l'API RESTful de gestion bancaire.\\n\\n\\n**Authentification¬†:**\\n- Les clients web utilisent un cookie HttpOnly s√©curis√© (invisible pour Swagger UI).\\n- Pour tester les endpoints prot√©g√©s dans Swagger UI, utilisez le bouton 'Authorize' et collez le Bearer Token JWT retourn√© par l'endpoint /v1/auth/login.\\n- Le cookie HttpOnly continue de fonctionner pour les vraies applications web.\\n\\n**Limite¬†:** Swagger UI ne peut pas tester les cookies HttpOnly, mais tous les endpoints prot√©g√©s acceptent aussi le header Authorization: Bearer <token>.\\n\\nPour automatiser vos tests, privil√©giez Postman, Insomnia ou cURL si vous souhaitez tester le flux cookie.",
        "contact": {
            "name": "Support API Bancaire",
            "email": "support@banque.sn"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "https://baye-bara-diop-project-bancaire-laravel.onrender.com/api",
            "description": "Serveur de production Render"
        },
        {
            "url": "http://localhost:8000/api",
            "description": "Serveur de d√©veloppement local"
        }
    ],
    "paths": {
        "/v1/auth/login": {
            "post": {
                "tags": [
                    "Authentification"
                ],
                "summary": "Connexion utilisateur",
                "description": "Authentifie un utilisateur (Admin ou Client) et retourne un token JWT dans un cookie HttpOnly s√©curis√©.\n\n**Comptes de test dans la base Render :**\n\n**üë§ Admin :**\n- Email : `admin@banque.sn`\n- Password : `password`\n- Acc√®s : Tous les comptes, toutes les op√©rations\n\n**üë§ Client :**\n- Email : `client@banque.sn`\n- Password : `password`\n- Acc√®s : Uniquement ses propres comptes\n- Ses comptes : `a0358125-5167-4b7c-8057-786038cd1e84`, `a0358113-ee00-4154-884d-9a3bd5d307fc`, etc.\n\n**üìù Instructions apr√®s connexion :**\n1. Copier le `access_token` de la r√©ponse\n2. Cliquer sur **Authorize** (üîí en haut √† droite)\n3. Coller le token dans **bearerAuth (http, Bearer)**\n4. Cliquer sur **Authorize** puis **Close**\n5. Tester les endpoints prot√©g√©s",
                "operationId": "login",
                "requestBody": {
                    "description": "Identifiants de connexion",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Email de l'utilisateur",
                                        "type": "string",
                                        "format": "email",
                                        "example": "admin@banque.sn"
                                    },
                                    "password": {
                                        "description": "Mot de passe de l'utilisateur",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Connexion r√©ussie",
                        "headers": {
                            "Set-Cookie": {
                                "description": "Cookies HttpOnly contenant access_token et refresh_token",
                                "schema": {
                                    "type": "string",
                                    "example": "access_token=eyJ0eXAiOiJKV1QiLCJhbGc...; refresh_token=a1b2c3d4..."
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Connexion r√©ussie"
                                        },
                                        "data": {
                                            "properties": {
                                                "access_token": {
                                                    "type": "string",
                                                    "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                                                },
                                                "refresh_token": {
                                                    "type": "string",
                                                    "example": "a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6"
                                                },
                                                "token_type": {
                                                    "type": "string",
                                                    "example": "Bearer"
                                                },
                                                "expires_in": {
                                                    "description": "Dur√©e de validit√© du token en secondes",
                                                    "type": "integer",
                                                    "example": 3600
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Email ou mot de passe incorrect"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "L'email est requis"
                                                    }
                                                },
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le mot de passe est requis"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/auth/refresh": {
            "post": {
                "tags": [
                    "Authentification"
                ],
                "summary": "Rafra√Æchir le token JWT",
                "description": "G√©n√®re un nouveau token d'acc√®s en utilisant le refresh token stock√© dans les cookies.",
                "operationId": "refresh",
                "responses": {
                    "200": {
                        "description": "Token rafra√Æchi avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Token rafra√Æchi avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "access_token": {
                                                    "type": "string",
                                                    "example": "eyJ0eXAiOiJKV1QiLCJhbGc..."
                                                },
                                                "token_type": {
                                                    "type": "string",
                                                    "example": "Bearer"
                                                },
                                                "expires_in": {
                                                    "type": "integer",
                                                    "example": 3600
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Refresh token manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Refresh token manquant"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    },
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/auth/logout": {
            "post": {
                "tags": [
                    "Authentification"
                ],
                "summary": "D√©connexion utilisateur",
                "description": "D√©connecte l'utilisateur authentifi√© et invalide le token JWT. Les cookies sont supprim√©s.",
                "operationId": "logout",
                "responses": {
                    "200": {
                        "description": "D√©connexion r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "D√©connexion r√©ussie"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    },
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Lister les comptes actifs",
                "description": "R√©cup√®re la liste des comptes ACTIFS non archiv√©s avec pagination et filtres optionnels. Les administrateurs voient tous les comptes actifs, les clients ne voient que leurs propres comptes actifs. NOTE: Seuls les comptes avec statut 'actif' sont retourn√©s - les comptes bloqu√©s et ferm√©s sont exclus.",
                "operationId": "getComptes",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page pour la pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "example": 1
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre d'√©l√©ments par page (maximum 100)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "maximum": 100,
                            "example": 10
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type de compte",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "epargne",
                                "cheque"
                            ],
                            "example": "epargne"
                        }
                    },
                    {
                        "name": "devise",
                        "in": "query",
                        "description": "Filtrer par devise",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "FCFA"
                        }
                    },
                    {
                        "name": "numeroCompte",
                        "in": "query",
                        "description": "Filtrer par num√©ro de compte exact (format: CPxxxxxxxxxx)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "pattern": "^CP\\d{10}$",
                            "example": "CP3385015606"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Rechercher par nom du titulaire ou num√©ro de compte",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Diop"
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "description": "Champ de tri",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "dateCreation",
                            "enum": [
                                "dateCreation",
                                "derniereModification",
                                "numeroCompte"
                            ],
                            "example": "dateCreation"
                        }
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "Ordre de tri",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "desc",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "desc"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des comptes r√©cup√©r√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Comptes r√©cup√©r√©s avec succ√®s"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "example": "a032f0ea-25e7-4b17-a7c4-e0a1aa6aa289"
                                                    },
                                                    "numeroCompte": {
                                                        "type": "string",
                                                        "example": "CP3105472638"
                                                    },
                                                    "titulaire": {
                                                        "type": "string",
                                                        "example": "Mamadou Diop"
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "example": "epargne"
                                                    },
                                                    "solde": {
                                                        "type": "number",
                                                        "example": 150000
                                                    },
                                                    "devise": {
                                                        "type": "string",
                                                        "example": "FCFA"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 45
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "total_pages": {
                                                    "type": "integer",
                                                    "example": 5
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation - Param√®tres invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "properties": {
                                                "limit": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le limit ne peut pas d√©passer 100"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Cr√©er un nouveau compte bancaire",
                "description": "Cr√©e un nouveau compte bancaire avec validation compl√®te (NCI, t√©l√©phone, email). Le mot de passe est g√©n√©r√© automatiquement et envoy√© par email.",
                "operationId": "1ec0ce255279af65d9481a1deab7bed1",
                "requestBody": {
                    "description": "Donn√©es du compte √† cr√©er",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "type",
                                    "devise",
                                    "client"
                                ],
                                "properties": {
                                    "type": {
                                        "description": "Type de compte (epargne ou cheque uniquement)",
                                        "type": "string",
                                        "enum": [
                                            "epargne",
                                            "cheque"
                                        ],
                                        "example": "epargne"
                                    },
                                    "devise": {
                                        "description": "Devise du compte",
                                        "type": "string",
                                        "enum": [
                                            "FCFA",
                                            "USD",
                                            "EUR"
                                        ],
                                        "example": "FCFA"
                                    },
                                    "client": {
                                        "description": "Informations du client",
                                        "required": [
                                            "titulaire",
                                            "nci",
                                            "email",
                                            "telephone",
                                            "adresse"
                                        ],
                                        "properties": {
                                            "id": {
                                                "description": "ID du client existant (optionnel)",
                                                "type": "string",
                                                "example": null,
                                                "nullable": true
                                            },
                                            "titulaire": {
                                                "description": "Nom complet du titulaire",
                                                "type": "string",
                                                "example": "Mamadou Diop"
                                            },
                                            "nci": {
                                                "description": "Num√©ro NCI s√©n√©galais (13 chiffres commen√ßant par 1 ou 2)",
                                                "type": "string",
                                                "example": "1234567890123"
                                            },
                                            "email": {
                                                "description": "Adresse email unique",
                                                "type": "string",
                                                "format": "email",
                                                "example": "mamadou.diop@example.com"
                                            },
                                            "telephone": {
                                                "description": "T√©l√©phone s√©n√©galais (+221 suivi de 70/75/76/77/78)",
                                                "type": "string",
                                                "example": "+221771234567"
                                            },
                                            "adresse": {
                                                "description": "Adresse compl√®te",
                                                "type": "string",
                                                "example": "Dakar, Plateau"
                                            }
                                        },
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Compte cr√©√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte cr√©√© avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "example": "a032f0ea-25e7-4b17-a7c4-e0a1aa6aa289"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "CP3105472638"
                                                },
                                                "titulaire": {
                                                    "type": "string",
                                                    "example": "Mamadou Diop"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "epargne"
                                                },
                                                "solde": {
                                                    "type": "number",
                                                    "example": 0
                                                },
                                                "devise": {
                                                    "type": "string",
                                                    "example": "FCFA"
                                                },
                                                "dateCreation": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-10-25T15:35:06+00:00"
                                                },
                                                "statut": {
                                                    "type": "string",
                                                    "example": "actif"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation - Donn√©es invalides ou champs requis manquants",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "description": "Exemples de tous les cas d'erreur possibles. Chaque champ peut avoir plusieurs types d'erreurs (requis, format, unicit√©).",
                                            "properties": {
                                                "type": {
                                                    "description": "Erreurs possibles : champ manquant, valeur invalide",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le type de compte est requis"
                                                    }
                                                },
                                                "devise": {
                                                    "description": "Erreurs possibles : champ manquant, valeur invalide",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La devise est requise"
                                                    }
                                                },
                                                "client": {
                                                    "description": "Erreur si l'objet client est manquant",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Les informations du client sont requises"
                                                    }
                                                },
                                                "client.titulaire": {
                                                    "description": "Erreur : champ manquant",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le nom du titulaire est requis"
                                                    }
                                                },
                                                "client.nci": {
                                                    "description": "Erreurs possibles : 1) champ manquant 'Le NCI est requis', 2) format invalide 'Le NCI doit √™tre un num√©ro NCI s√©n√©galais valide (13 chiffres commen√ßant par 1 ou 2)', 3) d√©j√† utilis√© 'Ce NCI est d√©j√† utilis√©'",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Ce NCI est d√©j√† utilis√©"
                                                    }
                                                },
                                                "client.email": {
                                                    "description": "Erreurs possibles : 1) champ manquant 'L'email est requis', 2) format invalide 'L'email doit √™tre valide', 3) d√©j√† utilis√© 'Cet email est d√©j√† utilis√©'",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Cet email est d√©j√† utilis√©"
                                                    }
                                                },
                                                "client.telephone": {
                                                    "description": "Erreurs possibles : 1) champ manquant 'Le t√©l√©phone est requis', 2) format invalide 'Le t√©l√©phone doit √™tre un num√©ro de t√©l√©phone s√©n√©galais valide (+221 suivi de 70/75/76/77/78)', 3) d√©j√† utilis√© 'Ce num√©ro de t√©l√©phone est d√©j√† utilis√©'",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Ce num√©ro de t√©l√©phone est d√©j√† utilis√©"
                                                    }
                                                },
                                                "client.adresse": {
                                                    "description": "Erreur : champ manquant",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "L'adresse est requise"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de format - NCI ou t√©l√©phone invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "properties": {
                                                "client.nci": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le NCI doit √™tre un num√©ro NCI s√©n√©galais valide (13 chiffres commen√ßant par 1 ou 2)"
                                                    }
                                                },
                                                "client.telephone": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le t√©l√©phone doit √™tre un num√©ro de t√©l√©phone s√©n√©galais valide (+221 suivi de 70/75/76/77/78)"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur interne",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Une erreur est survenue : [d√©tails de l'erreur]"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/comptes/{id}": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "R√©cup√©rer un compte sp√©cifique par ID (US 2.1)",
                "description": "R√©cup√®re les d√©tails complets d'un compte bancaire par son ID UUID. Impl√©mente une strat√©gie de recherche dual-database : cherche d'abord dans PostgreSQL (tous les comptes : actifs, bloqu√©s, ferm√©s), puis dans Neon (comptes archiv√©s) si non trouv√©. Admin peut r√©cup√©rer n'importe quel compte. Client peut r√©cup√©rer uniquement ses propres comptes.",
                "operationId": "getCompteById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID UUID du compte",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compte r√©cup√©r√© avec succ√®s (depuis PostgreSQL ou Neon)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440000"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "C00123456"
                                                },
                                                "titulaire": {
                                                    "type": "string",
                                                    "example": "Amadou Diallo"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "enum": [
                                                        "epargne",
                                                        "cheque"
                                                    ],
                                                    "example": "epargne"
                                                },
                                                "solde": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 1250000
                                                },
                                                "devise": {
                                                    "type": "string",
                                                    "example": "FCFA"
                                                },
                                                "dateCreation": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2023-03-15T00:00:00Z"
                                                },
                                                "statut": {
                                                    "type": "string",
                                                    "enum": [
                                                        "actif",
                                                        "bloque",
                                                        "ferme"
                                                    ],
                                                    "example": "bloque"
                                                },
                                                "motifBlocage": {
                                                    "type": "string",
                                                    "example": "Inactivit√© de 30+ jours",
                                                    "nullable": true
                                                },
                                                "metadata": {
                                                    "properties": {
                                                        "derniereModification": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2023-06-10T14:30:00Z"
                                                        },
                                                        "version": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "archived": {
                                                            "description": "true si r√©cup√©r√© depuis Neon, false si depuis PostgreSQL",
                                                            "type": "boolean",
                                                            "example": false
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s non autoris√© - Client tentant d'acc√©der √† un compte qui ne lui appartient pas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "string",
                                                    "example": "ACCESS_DENIED"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Acc√®s non autoris√© √† ce compte"
                                                },
                                                "details": {
                                                    "properties": {
                                                        "compteId": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "550e8400-e29b-41d4-a716-446655440000"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√© dans PostgreSQL ni dans Neon",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "string",
                                                    "example": "COMPTE_NOT_FOUND"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Le compte avec l'ID sp√©cifi√© n'existe pas"
                                                },
                                                "details": {
                                                    "properties": {
                                                        "compteId": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "550e8400-e29b-41d4-a716-446655440000"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Une erreur est survenue lors de la r√©cup√©ration du compte"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/numero/{numero}": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Obtenir un compte par num√©ro",
                "description": "R√©cup√®re les d√©tails complets d'un compte bancaire en utilisant son num√©ro de compte. Cherche automatiquement dans la base principale (Render) et dans les archives (Neon) si le compte est ferm√©, bloqu√© ou archiv√©.",
                "operationId": "getCompteByNumero",
                "parameters": [
                    {
                        "name": "numero",
                        "in": "path",
                        "description": "Num√©ro du compte (format: CPxxxxxxxxxx)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "CP3105472638"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compte r√©cup√©r√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte r√©cup√©r√© avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "example": "a032f0ea-25e7-4b17-a7c4-e0a1aa6aa289"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "CP3105472638"
                                                },
                                                "titulaire": {
                                                    "type": "string",
                                                    "example": "Mamadou Diop"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "epargne"
                                                },
                                                "solde": {
                                                    "type": "number",
                                                    "example": 150000
                                                },
                                                "devise": {
                                                    "type": "string",
                                                    "example": "FCFA"
                                                },
                                                "dateCreation": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "statut": {
                                                    "type": "string",
                                                    "example": "actif"
                                                },
                                                "archived": {
                                                    "description": "Indique si le compte est archiv√© dans Neon",
                                                    "type": "boolean",
                                                    "example": false
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte non trouv√©"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Le compte avec le num√©ro CP9999999999 n'existe pas"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/comptes/archives": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Lister les comptes archiv√©s",
                "description": "R√©cup√®re la liste des comptes √©pargne archiv√©s depuis le cloud (Neon). Les administrateurs voient tous les comptes archiv√©s, les clients ne voient que leurs propres comptes archiv√©s.",
                "operationId": "getArchivedComptes",
                "responses": {
                    "200": {
                        "description": "Liste des comptes archiv√©s r√©cup√©r√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Comptes archiv√©s r√©cup√©r√©s avec succ√®s"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "numeroCompte": {
                                                        "type": "string"
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "example": "epargne"
                                                    },
                                                    "solde": {
                                                        "type": "number",
                                                        "format": "float"
                                                    },
                                                    "archived_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "archive_reason": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "V√©rifier l'√©tat de l'API",
                "description": "Endpoint pour v√©rifier si l'API fonctionne correctement",
                "operationId": "healthCheck",
                "responses": {
                    "200": {
                        "description": "L'API fonctionne correctement",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "API is running"
                                        },
                                        "version": {
                                            "type": "string",
                                            "example": "v1"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-10-23T12:29:16+00:00"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "cookieAuth": {
                "type": "apiKey",
                "description": "Authentification via cookie HttpOnly contenant le JWT token",
                "name": "access_token",
                "in": "cookie"
            },
            "bearerAuth": {
                "type": "http",
                "description": "Authentification via Bearer Token JWT pour Swagger UI.",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentification",
            "description": "Endpoints pour l'authentification des utilisateurs (Admin/Client). Utilise JWT avec cookies HttpOnly pour une s√©curit√© renforc√©e."
        },
        {
            "name": "Comptes",
            "description": "Gestion compl√®te des comptes bancaires : cr√©ation de nouveaux comptes, consultation, listing avec filtres et pagination, archivage dans le cloud."
        },
        {
            "name": "Health",
            "description": "Health"
        }
    ]
}