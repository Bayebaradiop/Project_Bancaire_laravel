{
    "openapi": "3.0.0",
    "info": {
        "title": "API Bancaire - Documentation Compl√®te",
        "description": "Documentation de l'API RESTful de gestion bancaire.\n\n**COMMENT UTILISER L'AUTHENTIFICATION DANS SWAGGER UI :**\n\n**√âtape 1 : Se connecter**\n- Allez √† l'endpoint POST /v1/auth/login\n- Utilisez les identifiants de test (voir ci-dessous)\n- Cliquez sur 'Execute'\n- Copiez le access_token de la r√©ponse\n\n**√âtape 2 : Autoriser Swagger UI**\n- Cliquez sur le bouton 'Authorize' üîí (en haut √† droite de la page)\n- Collez votre token dans le champ 'Value'\n- Cliquez sur 'Authorize' puis 'Close'\n\n**√âtape 3 : Tester les endpoints prot√©g√©s**\n- Maintenant tous vos appels incluront automatiquement le Bearer token\n- Le cadenas üîí √† c√¥t√© de chaque endpoint sera verrouill√©\n\n**IDENTIFIANTS DE TEST (cr√©√©s par le seeder) :**\n\nAdmin :\n- Email : admin@banque.sn\n- Password : Admin@2025\n- Acc√®s : Tous les comptes et op√©rations\n\nClient :\n- Email : client@banque.sn\n- Password : Client@2025\n- Acc√®s : Uniquement ses propres comptes\n\n**NOTE TECHNIQUE :**\n- Les clients web utilisent un cookie HttpOnly s√©curis√© (invisible pour Swagger UI)\n- Pour Swagger UI, utilisez le bouton 'Authorize' avec le Bearer Token JWT\n- Pour automatiser vos tests : Postman, Insomnia ou cURL",
        "contact": {
            "name": "Support API Bancaire",
            "email": "support@banque.sn"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "https://baye-bara-diop-project-bancaire-laravel.onrender.com/api",
            "description": "Serveur de production Render"
        },
        {
            "url": "http://localhost:8000/api",
            "description": "Serveur de d√©veloppement local"
        }
    ],
    "paths": {
        "/v1/auth/login": {
            "post": {
                "tags": [
                    "Authentification"
                ],
                "summary": "Connexion utilisateur",
                "description": "Authentifie un utilisateur (Admin ou Client) et retourne un token JWT dans un cookie HttpOnly s√©curis√©.\n\n**Comptes de test (cr√©√©s par le seeder) :**\n\n**Admin :**\n- Email : `admin@banque.sn`\n- Password : `Admin@2025`\n- Acc√®s : Tous les comptes, toutes les op√©rations\n\n**Client :**\n- Email : `client@banque.sn`\n- Password : `Client@2025`\n- Acc√®s : Uniquement ses propres comptes\n\n**Instructions apr√®s connexion :**\n1. Copier le `access_token` de la r√©ponse\n2. Cliquer sur **Authorize** en haut √† droite\n3. Coller le token dans **bearerAuth (http, Bearer)**\n4. Cliquer sur **Authorize** puis **Close**\n5. Tester les endpoints prot√©g√©s",
                "operationId": "login",
                "requestBody": {
                    "description": "Identifiants de connexion",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Email de l'utilisateur",
                                        "type": "string",
                                        "format": "email",
                                        "example": "admin@banque.sn"
                                    },
                                    "password": {
                                        "description": "Mot de passe de l'utilisateur",
                                        "type": "string",
                                        "format": "password",
                                        "example": "Admin@2025"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Connexion r√©ussie",
                        "headers": {
                            "Set-Cookie": {
                                "description": "Cookies HttpOnly contenant access_token et refresh_token",
                                "schema": {
                                    "type": "string",
                                    "example": "access_token=eyJ0eXAiOiJKV1QiLCJhbGc...; refresh_token=a1b2c3d4..."
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Connexion r√©ussie"
                                        },
                                        "data": {
                                            "properties": {
                                                "access_token": {
                                                    "type": "string",
                                                    "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                                                },
                                                "refresh_token": {
                                                    "type": "string",
                                                    "example": "a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6"
                                                },
                                                "token_type": {
                                                    "type": "string",
                                                    "example": "Bearer"
                                                },
                                                "expires_in": {
                                                    "description": "Dur√©e de validit√© du token en secondes",
                                                    "type": "integer",
                                                    "example": 3600
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Email ou mot de passe incorrect"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "L'email est requis"
                                                    }
                                                },
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le mot de passe est requis"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/auth/refresh": {
            "post": {
                "tags": [
                    "Authentification"
                ],
                "summary": "Rafra√Æchir le token JWT",
                "description": "G√©n√®re un nouveau token d'acc√®s en utilisant le refresh token stock√© dans les cookies.",
                "operationId": "refresh",
                "responses": {
                    "200": {
                        "description": "Token rafra√Æchi avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Token rafra√Æchi avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "access_token": {
                                                    "type": "string",
                                                    "example": "eyJ0eXAiOiJKV1QiLCJhbGc..."
                                                },
                                                "token_type": {
                                                    "type": "string",
                                                    "example": "Bearer"
                                                },
                                                "expires_in": {
                                                    "type": "integer",
                                                    "example": 3600
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Refresh token manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Refresh token manquant"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    },
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/auth/logout": {
            "post": {
                "tags": [
                    "Authentification"
                ],
                "summary": "D√©connexion utilisateur",
                "description": "D√©connecte l'utilisateur authentifi√© et invalide le token JWT. Les cookies sont supprim√©s.",
                "operationId": "logout",
                "responses": {
                    "200": {
                        "description": "D√©connexion r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "D√©connexion r√©ussie"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    },
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Lister les comptes actifs",
                "description": "R√©cup√®re la liste des comptes ACTIFS non archiv√©s avec pagination et filtres optionnels. \n\n**AUTHENTIFICATION REQUISE :**\n1. Connectez-vous d'abord via POST /v1/auth/login\n2. Copiez le access_token de la r√©ponse\n3. Cliquez sur 'Authorize' (cadenas en haut √† droite)\n4. Collez le token et validez\n\nLes administrateurs voient tous les comptes actifs, les clients ne voient que leurs propres comptes actifs. \n\nNOTE: Seuls les comptes avec statut 'actif' sont retourn√©s - les comptes bloqu√©s et ferm√©s sont exclus.",
                "operationId": "getComptes",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page pour la pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "example": 1
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre d'√©l√©ments par page (maximum 100)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "maximum": 100,
                            "example": 10
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type de compte (laisser vide pour tous les types)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "epargne",
                                "cheque"
                            ]
                        }
                    },
                    {
                        "name": "devise",
                        "in": "query",
                        "description": "Filtrer par devise (laisser vide pour toutes les devises)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "numeroCompte",
                        "in": "query",
                        "description": "Filtrer par num√©ro de compte exact (format: CPxxxxxxxxxx, laisser vide pour tous)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "pattern": "^CP\\d{10}$"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Rechercher par nom du titulaire ou num√©ro de compte (laisser vide pour tous)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "description": "Champ de tri (laisser vide pour tri par d√©faut: dateCreation)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "dateCreation",
                                "derniereModification",
                                "numeroCompte"
                            ]
                        }
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "Ordre de tri (laisser vide pour tri d√©croissant par d√©faut)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des comptes r√©cup√©r√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Comptes r√©cup√©r√©s avec succ√®s"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "example": "a032f0ea-25e7-4b17-a7c4-e0a1aa6aa289"
                                                    },
                                                    "numeroCompte": {
                                                        "type": "string",
                                                        "example": "CP3105472638"
                                                    },
                                                    "titulaire": {
                                                        "type": "string",
                                                        "example": "Mamadou Diop"
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "example": "epargne"
                                                    },
                                                    "solde": {
                                                        "type": "number",
                                                        "example": 150000
                                                    },
                                                    "devise": {
                                                        "type": "string",
                                                        "example": "FCFA"
                                                    },
                                                    "statut": {
                                                        "type": "string",
                                                        "example": "actif"
                                                    },
                                                    "blocage_info": {
                                                        "description": "Informations sur le blocage programm√© (null si aucun blocage)",
                                                        "properties": {
                                                            "en_cours": {
                                                                "type": "boolean",
                                                                "example": true
                                                            },
                                                            "message": {
                                                                "type": "string",
                                                                "example": "Ce compte sera bloqu√© le 29/10/2025 jusqu'au 30/11/2025"
                                                            },
                                                            "dateDebutBlocage": {
                                                                "type": "string",
                                                                "example": "29/10/2025"
                                                            },
                                                            "dateFinBlocage": {
                                                                "type": "string",
                                                                "example": "30/11/2025",
                                                                "nullable": true
                                                            },
                                                            "motif": {
                                                                "type": "string",
                                                                "example": "Blocage administratif"
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "metadata": {
                                                        "properties": {
                                                            "derniereModification": {
                                                                "type": "string",
                                                                "example": "2025-10-28T21:38:16+00:00"
                                                            },
                                                            "version": {
                                                                "type": "integer",
                                                                "example": 4
                                                            },
                                                            "location": {
                                                                "type": "string",
                                                                "example": "PostgreSQL"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 45
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "total_pages": {
                                                    "type": "integer",
                                                    "example": 5
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation - Param√®tres invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "properties": {
                                                "limit": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le limit ne peut pas d√©passer 100"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Cr√©er un nouveau compte bancaire avec auto-cr√©ation du client",
                "description": "**üéØ FONCTIONNALIT√â AUTO-CR√âATION :**\nCette API cr√©e automatiquement un nouveau compte bancaire. Si le client n'existe pas :\n- ‚úÖ Un nouveau client est cr√©√© automatiquement\n- ‚úÖ Un mot de passe al√©atoire est g√©n√©r√©\n- ‚úÖ Un code de s√©curit√© est g√©n√©r√©\n- ‚úÖ Un num√©ro de compte unique est g√©n√©r√© (format: CPxxxxxxxxxx)\n- ‚úÖ **Un email de bienvenue est envoy√© automatiquement** avec :\n  - Le mot de passe (en clair, avant hashage)\n  - Le code de s√©curit√©\n  - Le num√©ro de compte\n  - Les instructions de connexion\n\n**üìß EMAIL AUTOMATIQUE :**\nL'email est envoy√© via SendGrid avec un design professionnel incluant :\n- Toutes les informations de connexion\n- Conseils de s√©curit√©\n- Avertissement pour changer le mot de passe √† la premi√®re connexion\n\n**AUTHENTIFICATION REQUISE :**\nSi vous voyez 'Unauthenticated', suivez ces √©tapes :\n1. Allez √† POST /v1/auth/login et connectez-vous avec admin@banque.sn / Admin@2025\n2. Copiez le access_token de la r√©ponse\n3. Cliquez sur 'Authorize' (cadenas en haut)\n4. Collez : Bearer VOTRE_TOKEN (n'oubliez pas 'Bearer ' avec l'espace)\n5. Cliquez Authorize puis Close\n6. R√©essayez cette requ√™te",
                "operationId": "1ec0ce255279af65d9481a1deab7bed1",
                "requestBody": {
                    "description": "Donn√©es du compte √† cr√©er",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "type",
                                    "devise",
                                    "client"
                                ],
                                "properties": {
                                    "type": {
                                        "description": "Type de compte (epargne ou cheque uniquement)",
                                        "type": "string",
                                        "enum": [
                                            "epargne",
                                            "cheque"
                                        ],
                                        "example": "epargne"
                                    },
                                    "devise": {
                                        "description": "Devise du compte",
                                        "type": "string",
                                        "enum": [
                                            "FCFA",
                                            "USD",
                                            "EUR"
                                        ],
                                        "example": "FCFA"
                                    },
                                    "client": {
                                        "description": "Informations du client",
                                        "required": [
                                            "titulaire",
                                            "nci",
                                            "email",
                                            "telephone",
                                            "adresse"
                                        ],
                                        "properties": {
                                            "id": {
                                                "description": "ID du client existant (optionnel)",
                                                "type": "string",
                                                "example": null,
                                                "nullable": true
                                            },
                                            "titulaire": {
                                                "description": "Nom complet du titulaire",
                                                "type": "string",
                                                "example": "Mamadou Diop"
                                            },
                                            "nci": {
                                                "description": "Num√©ro NCI s√©n√©galais (13 chiffres commen√ßant par 1 ou 2)",
                                                "type": "string",
                                                "example": "1234567890123"
                                            },
                                            "email": {
                                                "description": "Adresse email unique",
                                                "type": "string",
                                                "format": "email",
                                                "example": "mamadou.diop@example.com"
                                            },
                                            "telephone": {
                                                "description": "T√©l√©phone s√©n√©galais (+221 suivi de 70/75/76/77/78)",
                                                "type": "string",
                                                "example": "+221771234567"
                                            },
                                            "adresse": {
                                                "description": "Adresse compl√®te",
                                                "type": "string",
                                                "example": "Dakar, Plateau"
                                            }
                                        },
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Compte cr√©√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte cr√©√© avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "example": "a032f0ea-25e7-4b17-a7c4-e0a1aa6aa289"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "CP3105472638"
                                                },
                                                "titulaire": {
                                                    "type": "string",
                                                    "example": "Mamadou Diop"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "epargne"
                                                },
                                                "solde": {
                                                    "type": "number",
                                                    "example": 0
                                                },
                                                "devise": {
                                                    "type": "string",
                                                    "example": "FCFA"
                                                },
                                                "dateCreation": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-10-25T15:35:06+00:00"
                                                },
                                                "statut": {
                                                    "type": "string",
                                                    "example": "actif"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation - Donn√©es invalides ou champs requis manquants",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "description": "Exemples de tous les cas d'erreur possibles. Chaque champ peut avoir plusieurs types d'erreurs (requis, format, unicit√©).",
                                            "properties": {
                                                "type": {
                                                    "description": "Erreurs possibles : champ manquant, valeur invalide",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le type de compte est requis"
                                                    }
                                                },
                                                "devise": {
                                                    "description": "Erreurs possibles : champ manquant, valeur invalide",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La devise est requise"
                                                    }
                                                },
                                                "client": {
                                                    "description": "Erreur si l'objet client est manquant",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Les informations du client sont requises"
                                                    }
                                                },
                                                "client.titulaire": {
                                                    "description": "Erreur : champ manquant",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le nom du titulaire est requis"
                                                    }
                                                },
                                                "client.nci": {
                                                    "description": "Erreurs possibles : 1) champ manquant 'Le NCI est requis', 2) format invalide 'Le NCI doit √™tre un num√©ro NCI s√©n√©galais valide (13 chiffres commen√ßant par 1 ou 2)', 3) d√©j√† utilis√© 'Ce NCI est d√©j√† utilis√©'",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Ce NCI est d√©j√† utilis√©"
                                                    }
                                                },
                                                "client.email": {
                                                    "description": "Erreurs possibles : 1) champ manquant 'L'email est requis', 2) format invalide 'L'email doit √™tre valide', 3) d√©j√† utilis√© 'Cet email est d√©j√† utilis√©'",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Cet email est d√©j√† utilis√©"
                                                    }
                                                },
                                                "client.telephone": {
                                                    "description": "Erreurs possibles : 1) champ manquant 'Le t√©l√©phone est requis', 2) format invalide 'Le t√©l√©phone doit √™tre un num√©ro de t√©l√©phone s√©n√©galais valide (+221 suivi de 70/75/76/77/78)', 3) d√©j√† utilis√© 'Ce num√©ro de t√©l√©phone est d√©j√† utilis√©'",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Ce num√©ro de t√©l√©phone est d√©j√† utilis√©"
                                                    }
                                                },
                                                "client.adresse": {
                                                    "description": "Erreur : champ manquant",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "L'adresse est requise"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de format - NCI ou t√©l√©phone invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "properties": {
                                                "client.nci": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le NCI doit √™tre un num√©ro NCI s√©n√©galais valide (13 chiffres commen√ßant par 1 ou 2)"
                                                    }
                                                },
                                                "client.telephone": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le t√©l√©phone doit √™tre un num√©ro de t√©l√©phone s√©n√©galais valide (+221 suivi de 70/75/76/77/78)"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur interne",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Une erreur est survenue : [d√©tails de l'erreur]"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/{id}": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "R√©cup√©rer un compte sp√©cifique par ID (US 2.1)",
                "description": "R√©cup√®re les d√©tails complets d'un compte bancaire par son ID UUID.\n\n**AUTHENTIFICATION REQUISE :** Utilisez le bouton 'Authorize' avec votre Bearer Token obtenu via /v1/auth/login\n\nImpl√©mente une strat√©gie de recherche dual-database : \n- Cherche d'abord dans PostgreSQL (comptes actifs, bloqu√©s, ferm√©s)\n- Puis dans Neon (comptes archiv√©s) si non trouv√©\n\nAdmin peut r√©cup√©rer n'importe quel compte. Client peut r√©cup√©rer uniquement ses propres comptes.",
                "operationId": "getCompteById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID UUID du compte",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "a038f679-7eac-46cc-b036-7ca130facf09"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compte r√©cup√©r√© avec succ√®s (depuis PostgreSQL ou Neon)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "a038f679-7eac-46cc-b036-7ca130facf09"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "C00123456"
                                                },
                                                "titulaire": {
                                                    "type": "string",
                                                    "example": "Amadou Diallo"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "enum": [
                                                        "epargne",
                                                        "cheque"
                                                    ],
                                                    "example": "epargne"
                                                },
                                                "solde": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 1250000
                                                },
                                                "devise": {
                                                    "type": "string",
                                                    "example": "FCFA"
                                                },
                                                "dateCreation": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2023-03-15T00:00:00Z"
                                                },
                                                "statut": {
                                                    "type": "string",
                                                    "enum": [
                                                        "actif",
                                                        "bloque",
                                                        "ferme"
                                                    ],
                                                    "example": "actif"
                                                },
                                                "motifBlocage": {
                                                    "type": "string",
                                                    "example": "Blocage administratif",
                                                    "nullable": true
                                                },
                                                "blocage_info": {
                                                    "description": "Informations sur le blocage programm√© (null si aucun blocage programm√©)",
                                                    "properties": {
                                                        "en_cours": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "message": {
                                                            "type": "string",
                                                            "example": "Ce compte sera bloqu√© le 29/10/2025 jusqu'au 30/11/2025"
                                                        },
                                                        "dateDebutBlocage": {
                                                            "type": "string",
                                                            "example": "29/10/2025"
                                                        },
                                                        "dateFinBlocage": {
                                                            "type": "string",
                                                            "example": "30/11/2025",
                                                            "nullable": true
                                                        },
                                                        "motif": {
                                                            "type": "string",
                                                            "example": "Blocage administratif"
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "metadata": {
                                                    "properties": {
                                                        "derniereModification": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2023-06-10T14:30:00Z"
                                                        },
                                                        "version": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "location": {
                                                            "description": "PostgreSQL pour comptes actifs, Neon pour comptes archiv√©s/bloqu√©s",
                                                            "type": "string",
                                                            "example": "PostgreSQL"
                                                        },
                                                        "archived": {
                                                            "description": "true si r√©cup√©r√© depuis Neon, false si depuis PostgreSQL",
                                                            "type": "boolean",
                                                            "example": false
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s non autoris√© - Client tentant d'acc√©der √† un compte qui ne lui appartient pas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "string",
                                                    "example": "ACCESS_DENIED"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Acc√®s non autoris√© √† ce compte"
                                                },
                                                "details": {
                                                    "properties": {
                                                        "compteId": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "550e8400-e29b-41d4-a716-446655440000"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√© dans PostgreSQL ni dans Neon",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "string",
                                                    "example": "COMPTE_NOT_FOUND"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Le compte avec l'ID sp√©cifi√© n'existe pas"
                                                },
                                                "details": {
                                                    "properties": {
                                                        "compteId": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "550e8400-e29b-41d4-a716-446655440000"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Une erreur est survenue lors de la r√©cup√©ration du compte"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/numero/{numero}": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Obtenir un compte par num√©ro",
                "description": "R√©cup√®re les d√©tails complets d'un compte bancaire en utilisant son num√©ro de compte.\n\n**AUTHENTIFICATION REQUISE :** Utilisez le bouton 'Authorize' avec votre Bearer Token obtenu via /v1/auth/login\n\nCherche automatiquement dans la base principale (PostgreSQL) et dans les archives (Neon) si le compte est ferm√©, bloqu√© ou archiv√©.",
                "operationId": "getCompteByNumero",
                "parameters": [
                    {
                        "name": "numero",
                        "in": "path",
                        "description": "Num√©ro du compte (format: CPxxxxxxxxxx)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "CP5342804805"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compte r√©cup√©r√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte r√©cup√©r√© avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "example": "a032f0ea-25e7-4b17-a7c4-e0a1aa6aa289"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "CP5342804805"
                                                },
                                                "titulaire": {
                                                    "type": "string",
                                                    "example": "Mamadou Diop"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "epargne"
                                                },
                                                "solde": {
                                                    "type": "number",
                                                    "example": 150000
                                                },
                                                "devise": {
                                                    "type": "string",
                                                    "example": "FCFA"
                                                },
                                                "dateCreation": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "statut": {
                                                    "type": "string",
                                                    "example": "actif"
                                                },
                                                "blocage_info": {
                                                    "description": "Informations sur le blocage programm√© (null si aucun blocage)",
                                                    "properties": {
                                                        "en_cours": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "message": {
                                                            "type": "string",
                                                            "example": "Ce compte sera bloqu√© le 29/10/2025 jusqu'au 30/11/2025"
                                                        },
                                                        "dateDebutBlocage": {
                                                            "type": "string",
                                                            "example": "29/10/2025"
                                                        },
                                                        "dateFinBlocage": {
                                                            "type": "string",
                                                            "example": "30/11/2025",
                                                            "nullable": true
                                                        },
                                                        "motif": {
                                                            "type": "string",
                                                            "example": "Blocage administratif"
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "metadata": {
                                                    "properties": {
                                                        "derniereModification": {
                                                            "type": "string",
                                                            "format": "date-time"
                                                        },
                                                        "version": {
                                                            "type": "integer",
                                                            "example": 4
                                                        },
                                                        "location": {
                                                            "type": "string",
                                                            "example": "PostgreSQL"
                                                        },
                                                        "archived": {
                                                            "description": "Indique si le compte est archiv√© dans Neon",
                                                            "type": "boolean",
                                                            "example": false
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte non trouv√©"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Le compte avec le num√©ro CP9999999999 n'existe pas"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/archives": {
            "get": {
                "tags": [
                    "Comptes - Archives"
                ],
                "summary": "Lister les comptes archiv√©s depuis Neon",
                "description": "R√©cup√®re les comptes archiv√©s stock√©s dans Neon (base serverless). Admin voit tous les comptes, Client voit uniquement les siens. Authentification requise via Bearer token.",
                "operationId": "getArchivedComptes",
                "responses": {
                    "200": {
                        "description": "Liste des comptes archiv√©s r√©cup√©r√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Liste des comptes archiv√©s r√©cup√©r√©e avec succ√®s"
                                        },
                                        "data": {
                                            "description": "Liste des comptes archiv√©s dans Neon",
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "a03902aa-a03a-4213-b865-0a05f77dee48"
                                                    },
                                                    "numeroCompte": {
                                                        "type": "string",
                                                        "example": "CP4287048035"
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "example": "epargne"
                                                    },
                                                    "statut": {
                                                        "type": "string",
                                                        "example": "bloque"
                                                    },
                                                    "solde": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 5000
                                                    },
                                                    "devise": {
                                                        "type": "string",
                                                        "example": "FCFA"
                                                    },
                                                    "archived_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-10-28T17:11:22Z"
                                                    },
                                                    "archived_by": {
                                                        "description": "ID de l'utilisateur qui a archiv√©",
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "archive_reason": {
                                                        "type": "string",
                                                        "example": "Blocage imm√©diat - Activit√© suspecte"
                                                    },
                                                    "dateDebutBlocage": {
                                                        "type": "string",
                                                        "format": "date",
                                                        "example": "2025-10-28"
                                                    },
                                                    "dateFinBlocage": {
                                                        "type": "string",
                                                        "format": "date",
                                                        "example": "2025-11-28",
                                                        "nullable": true
                                                    },
                                                    "motifBlocage": {
                                                        "type": "string",
                                                        "example": "Activit√© suspecte d√©tect√©e"
                                                    },
                                                    "client": {
                                                        "properties": {
                                                            "nom": {
                                                                "type": "string",
                                                                "example": "DIOP"
                                                            },
                                                            "prenom": {
                                                                "type": "string",
                                                                "example": "Fatou"
                                                            },
                                                            "email": {
                                                                "type": "string",
                                                                "example": "fatou@example.com"
                                                            },
                                                            "telephone": {
                                                                "type": "string",
                                                                "example": "+221 77 123 45 67"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/{compteId}": {
            "patch": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Mettre √† jour un compte (US 2.3)",
                "description": "Permet √† un administrateur de mettre √† jour les informations d'un compte bancaire. Seuls les administrateurs peuvent utiliser cet endpoint.",
                "operationId": "updateCompte",
                "parameters": [
                    {
                        "name": "compteId",
                        "in": "path",
                        "description": "UUID du compte √† mettre √† jour",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "a032f0ea-25e7-4b17-a7c4-e0a1aa6aa289"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Donn√©es √† mettre √† jour (au moins un champ requis)",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "enum": [
                                            "epargne",
                                            "cheque"
                                        ],
                                        "example": "cheque"
                                    },
                                    "solde": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 50000
                                    },
                                    "statut": {
                                        "type": "string",
                                        "enum": [
                                            "actif",
                                            "bloque",
                                            "ferme"
                                        ],
                                        "example": "actif"
                                    },
                                    "devise": {
                                        "type": "string",
                                        "enum": [
                                            "FCFA",
                                            "USD",
                                            "EUR"
                                        ],
                                        "example": "FCFA"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Compte mis √† jour avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte mis √† jour avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "numeroCompte": {
                                                    "type": "string"
                                                },
                                                "type": {
                                                    "type": "string"
                                                },
                                                "solde": {
                                                    "type": "number"
                                                },
                                                "statut": {
                                                    "type": "string"
                                                },
                                                "devise": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s refus√© - Admin uniquement"
                    },
                    "404": {
                        "description": "Compte non trouv√©"
                    },
                    "422": {
                        "description": "Donn√©es invalides"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/{compteId}/bloquer": {
            "post": {
                "tags": [
                    "Comptes - Blocage/D√©blocage"
                ],
                "summary": "Bloquer un compte √©pargne (Imm√©diat ou Programm√©)",
                "description": "Bloque un compte √©pargne de mani√®re imm√©diate (date=aujourd'hui ‚Üí archiv√© dans Neon) ou programm√©e (date future ‚Üí reste dans PostgreSQL jusqu'√† la date). Authentification requise.",
                "operationId": "bloquerCompte",
                "parameters": [
                    {
                        "name": "compteId",
                        "in": "path",
                        "description": "UUID du compte √©pargne √† bloquer",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "a03902aa-a03a-4213-b865-0a05f77dee48"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Param√®tres du blocage (tous optionnels)",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "dateDebutBlocage": {
                                        "description": "Date de d√©but du blocage (YYYY-MM-DD). Si omise ou = aujourd'hui ‚Üí blocage imm√©diat. Si future ‚Üí blocage programm√©",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-11-15"
                                    },
                                    "dateFinBlocage": {
                                        "description": "Date de fin du blocage (YYYY-MM-DD). Le compte sera automatiquement d√©bloqu√© √† cette date par un Job",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-12-15"
                                    },
                                    "raison": {
                                        "description": "üìù Motif du blocage (max 500 caract√®res)",
                                        "type": "string",
                                        "example": "Activit√© suspecte d√©tect√©e"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Compte bloqu√© avec succ√®s (imm√©diat ou programm√©)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "description": "Message varie selon le type : imm√©diat ou programm√©",
                                            "type": "string",
                                            "example": "Compte bloqu√© avec succ√®s et archiv√© dans Neon"
                                        },
                                        "data": {
                                            "description": "D√©tails du compte apr√®s blocage",
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "a03902aa-a03a-4213-b865-0a05f77dee48"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "CP4287048035"
                                                },
                                                "statut": {
                                                    "description": "'bloque' si imm√©diat, 'actif' si programm√©",
                                                    "type": "string",
                                                    "example": "bloque"
                                                },
                                                "motifBlocage": {
                                                    "type": "string",
                                                    "example": "Activit√© suspecte d√©tect√©e"
                                                },
                                                "dateDebutBlocage": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-15T00:00:00+00:00"
                                                },
                                                "dateFinBlocage": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-12-15T00:00:00+00:00",
                                                    "nullable": true
                                                },
                                                "dateBlocage": {
                                                    "description": "Date effective du blocage (null si programm√©)",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-10-28T17:11:22+00:00",
                                                    "nullable": true
                                                },
                                                "blocage_programme": {
                                                    "description": "true si blocage programm√©, false si imm√©diat",
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "location": {
                                                    "description": "'PostgreSQL' si programm√©, 'Neon' si imm√©diat",
                                                    "type": "string",
                                                    "example": "PostgreSQL"
                                                },
                                                "archived": {
                                                    "description": "true si archiv√© dans Neon, false si dans PostgreSQL",
                                                    "type": "boolean",
                                                    "example": false
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation m√©tier",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "description": "Messages possibles : 'Seuls les comptes √©pargne...', 'Le compte ne peut pas √™tre bloqu√©. Statut actuel: ...', 'Ce compte est d√©j√† bloqu√© et se trouve dans Neon'",
                                            "type": "string",
                                            "example": "Seuls les comptes √©pargne peuvent √™tre bloqu√©s"
                                        },
                                        "http_code": {
                                            "type": "integer",
                                            "example": 400
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ce compte n'existe pas"
                                        },
                                        "http_code": {
                                            "type": "integer",
                                            "example": 404
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation des donn√©es",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Les donn√©es fournies sont invalides"
                                        },
                                        "errors": {
                                            "properties": {
                                                "dateDebutBlocage": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La date de d√©but doit √™tre sup√©rieure ou √©gale √† aujourd'hui"
                                                    }
                                                },
                                                "dateFinBlocage": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La date de fin doit √™tre apr√®s la date de d√©but"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/{compteId}/debloquer": {
            "post": {
                "tags": [
                    "Comptes - Blocage/D√©blocage"
                ],
                "summary": "D√©bloquer un compte √©pargne",
                "description": "D√©bloque un compte √©pargne (restauration depuis Neon vers PostgreSQL) ou annule un blocage programm√©. Authentification requise.",
                "operationId": "debloquerCompte",
                "parameters": [
                    {
                        "name": "compteId",
                        "in": "path",
                        "description": "UUID du compte √©pargne √† d√©bloquer",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "a03902aa-a03a-4213-b865-0a05f77dee48"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Param√®tres du d√©blocage (optionnel)",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "motif": {
                                        "description": "üìù Motif du d√©blocage (optionnel, max 500 caract√®res)",
                                        "type": "string",
                                        "example": "V√©rification compl√©t√©e"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Compte d√©bloqu√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte d√©bloqu√© avec succ√®s"
                                        },
                                        "data": {
                                            "description": "D√©tails du compte apr√®s d√©blocage",
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "a03902aa-a03a-4213-b865-0a05f77dee48"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "CP4287048035"
                                                },
                                                "statut": {
                                                    "description": "Toujours 'actif' apr√®s d√©blocage",
                                                    "type": "string",
                                                    "example": "actif"
                                                },
                                                "dateDeblocage": {
                                                    "description": "Date effective du d√©blocage",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-10-28T18:30:00+00:00"
                                                },
                                                "location": {
                                                    "description": "Toujours 'PostgreSQL' apr√®s d√©blocage",
                                                    "type": "string",
                                                    "example": "PostgreSQL"
                                                },
                                                "restored_from_neon": {
                                                    "description": "true si restaur√© depuis Neon, false si annulation blocage programm√©",
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation m√©tier",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Le compte ne peut pas √™tre d√©bloqu√©. Statut actuel : actif"
                                        },
                                        "http_code": {
                                            "type": "integer",
                                            "example": 400
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Le compte avec l'ID sp√©cifi√© n'existe pas"
                                        },
                                        "http_code": {
                                            "type": "integer",
                                            "example": 404
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/{numeroCompte}": {
            "delete": {
                "tags": [
                    "Comptes - Archives"
                ],
                "summary": "Supprimer un compte √©pargne (Soft Delete + Archive)",
                "description": "**üóëÔ∏è SUPPRESSION S√âCURIS√âE :**\nSupprime un compte √©pargne avec soft delete dans PostgreSQL et archivage automatique dans Neon.\n\n**‚ö†Ô∏è VALIDATIONS AUTOMATIQUES :**\n- ‚úÖ Seuls les comptes **√©pargne** peuvent √™tre supprim√©s (les comptes ch√®que sont prot√©g√©s)\n- ‚úÖ Le compte ne doit PAS avoir un **blocage programm√©** en cours\n- ‚úÖ Le compte ne doit PAS √™tre actuellement **bloqu√©** (statut='bloque')\n- ‚úÖ Le compte ne doit PAS √™tre d√©j√† supprim√©\n- ‚úÖ Le compte ne doit PAS √™tre d√©j√† archiv√©\n\n**üìß Si validation √©choue :**\n- Blocage programm√© ‚Üí Message : 'Ce compte ne peut pas √™tre supprim√© car il a un blocage programm√© pr√©vu le {date}. Veuillez d'abord annuler le blocage ou attendre son ex√©cution.'\n- Compte bloqu√© ‚Üí Message : 'Ce compte est actuellement bloqu√©. Veuillez d'abord le d√©bloquer avant de le supprimer.'\n- Compte ch√®que ‚Üí Message : 'Les comptes ch√®que ne peuvent pas √™tre supprim√©s'\n\n**‚ôªÔ∏è RESTAURATION :**\nRestauration possible via POST /v1/comptes/restore/{id}\n\nAuthentification requise (admin uniquement).",
                "operationId": "deleteCompte",
                "parameters": [
                    {
                        "name": "numeroCompte",
                        "in": "path",
                        "description": "**Num√©ro du compte** √† supprimer (format : CPxxxxxxxxxx)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "CP3105472638"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compte supprim√© et archiv√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte supprim√© et archiv√© avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "b12345aa-bb12-4c3d-9876-abc123def456"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "CP3105472638"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "epargne"
                                                },
                                                "solde": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 12500
                                                },
                                                "deleted_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-10-28T18:45:00Z"
                                                },
                                                "archived_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-10-28T18:45:01Z"
                                                },
                                                "archive_reason": {
                                                    "type": "string",
                                                    "example": "Suppression √† la demande du client"
                                                },
                                                "client": {
                                                    "properties": {
                                                        "nom": {
                                                            "type": "string",
                                                            "example": "SARR"
                                                        },
                                                        "prenom": {
                                                            "type": "string",
                                                            "example": "Mamadou"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "example": "mamadou@example.com"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreurs de validation - Compte prot√©g√© contre la suppression",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "description": "Message d'erreur selon le cas",
                                            "type": "string",
                                            "example": "Ce compte ne peut pas √™tre supprim√© car il a un blocage programm√© pr√©vu le 15/11/2025. Veuillez d'abord annuler le blocage ou attendre son ex√©cution."
                                        },
                                        "code": {
                                            "type": "integer",
                                            "example": 400
                                        },
                                        "examples": {
                                            "description": "Exemples de messages d'erreur possibles",
                                            "properties": {
                                                "blocage_programme": {
                                                    "type": "string",
                                                    "example": "Ce compte ne peut pas √™tre supprim√© car il a un blocage programm√© pr√©vu le 15/11/2025. Veuillez d'abord annuler le blocage ou attendre son ex√©cution."
                                                },
                                                "compte_bloque": {
                                                    "type": "string",
                                                    "example": "Ce compte est actuellement bloqu√©. Veuillez d'abord le d√©bloquer avant de le supprimer."
                                                },
                                                "type_cheque": {
                                                    "type": "string",
                                                    "example": "Les comptes ch√®que ne peuvent pas √™tre supprim√©s"
                                                },
                                                "deja_supprime": {
                                                    "type": "string",
                                                    "example": "Le compte CP3105472638 est d√©j√† supprim√©"
                                                },
                                                "deja_archive": {
                                                    "type": "string",
                                                    "example": "Le compte CP3105472638 est d√©j√† archiv√©"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Le compte CP3105472638 n'existe pas"
                                        },
                                        "http_code": {
                                            "type": "integer",
                                            "example": 404
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/comptes/restore/{id}": {
            "post": {
                "tags": [
                    "Comptes - Archives"
                ],
                "summary": "Restaurer un compte depuis les archives",
                "description": "Restaure un compte supprim√© en le r√©cup√©rant depuis Neon vers PostgreSQL. Le compte devient actif et utilisable. Admin uniquement. Authentification requise.",
                "operationId": "restoreCompte",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "**UUID du compte** √† restaurer depuis les archives Neon",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "b12345aa-bb12-4c3d-9876-abc123def456"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compte restaur√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte restaur√© avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "b12345aa-bb12-4c3d-9876-abc123def456"
                                                },
                                                "numeroCompte": {
                                                    "type": "string",
                                                    "example": "CP3105472638"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "epargne"
                                                },
                                                "statut": {
                                                    "type": "string",
                                                    "example": "actif"
                                                },
                                                "solde": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 12500
                                                },
                                                "devise": {
                                                    "type": "string",
                                                    "example": "FCFA"
                                                },
                                                "restored_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-10-28T20:15:30Z"
                                                },
                                                "restored_by": {
                                                    "description": "UUID de l'admin qui a restaur√©",
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "deleted_at": {
                                                    "description": "NULL apr√®s restauration",
                                                    "type": "string",
                                                    "example": null,
                                                    "nullable": true
                                                },
                                                "client": {
                                                    "properties": {
                                                        "nom": {
                                                            "type": "string",
                                                            "example": "SARR"
                                                        },
                                                        "prenom": {
                                                            "type": "string",
                                                            "example": "Mamadou"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "example": "mamadou@example.com"
                                                        },
                                                        "telephone": {
                                                            "type": "string",
                                                            "example": "+221 77 555 66 77"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Compte d√©j√† actif ou validation √©chou√©e",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ce compte est d√©j√† actif et n'a pas besoin d'√™tre restaur√©"
                                        },
                                        "http_code": {
                                            "type": "integer",
                                            "example": 400
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√© dans les archives",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Le compte avec l'ID b12345aa-bb12-4c3d-9876-abc123def456 n'existe pas dans les archives"
                                        },
                                        "http_code": {
                                            "type": "integer",
                                            "example": 404
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√© ou non autoris√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Vous n'avez pas les droits pour restaurer des comptes"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/v1/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "V√©rifier l'√©tat de l'API",
                "description": "Endpoint pour v√©rifier si l'API fonctionne correctement",
                "operationId": "healthCheck",
                "responses": {
                    "200": {
                        "description": "L'API fonctionne correctement",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "API is running"
                                        },
                                        "version": {
                                            "type": "string",
                                            "example": "v1"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-10-23T12:29:16+00:00"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "cookieAuth": {
                "type": "apiKey",
                "description": "Authentification via cookie HttpOnly contenant le JWT token",
                "name": "access_token",
                "in": "cookie"
            },
            "bearerAuth": {
                "type": "http",
                "description": "CLIQUEZ SUR 'Authorize' üîí EN HAUT ‚Üí Collez votre token (sans 'Bearer') ‚Üí Validez. Pour obtenir un token : POST /v1/auth/login avec admin@banque.sn / Admin@2025",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentification",
            "description": "Endpoints pour l'authentification des utilisateurs (Admin/Client). Utilise JWT avec cookies HttpOnly pour une s√©curit√© renforc√©e."
        },
        {
            "name": "Comptes",
            "description": "Gestion compl√®te des comptes bancaires : cr√©ation de nouveaux comptes, consultation, listing avec filtres et pagination, archivage dans le cloud."
        },
        {
            "name": "Comptes - Archives",
            "description": "Comptes - Archives"
        },
        {
            "name": "Comptes - Blocage/D√©blocage",
            "description": "Comptes - Blocage/D√©blocage"
        },
        {
            "name": "Health",
            "description": "Health"
        }
    ]
}