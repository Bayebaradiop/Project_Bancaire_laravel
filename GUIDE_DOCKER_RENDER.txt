â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 GUIDE : DOCKERISER ET DÃ‰PLOYER SUR RENDER (GRATUIT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ Ã‰TAPE 1 : CRÃ‰ER LE DOCKERFILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CrÃ©er un fichier : Dockerfile

FROM php:8.1-fpm-alpine

# Installer les dÃ©pendances systÃ¨me
RUN apk add --no-cache \
    git \
    curl \
    libpng-dev \
    libxml2-dev \
    libzip-dev \
    oniguruma-dev \
    postgresql-dev \
    zip \
    unzip \
    nginx \
    supervisor

# Installer les extensions PHP
RUN docker-php-ext-install \
    pdo_pgsql \
    pgsql \
    mbstring \
    exif \
    pcntl \
    bcmath \
    gd \
    zip

# Installer Composer
COPY --from=composer:latest /usr/bin/composer /usr/bin/composer

# CrÃ©er le rÃ©pertoire de travail
WORKDIR /var/www/html

# Copier les fichiers du projet
COPY . .

# Installer les dÃ©pendances PHP
RUN composer install --no-dev --optimize-autoloader --no-interaction

# Configurer les permissions
RUN chown -R www-data:www-data /var/www/html/storage /var/www/html/bootstrap/cache
RUN chmod -R 775 /var/www/html/storage /var/www/html/bootstrap/cache

# Copier les configurations
COPY docker/nginx/nginx.conf /etc/nginx/nginx.conf
COPY docker/supervisor/supervisord.conf /etc/supervisor/conf.d/supervisord.conf
COPY docker/entrypoint.sh /usr/local/bin/entrypoint.sh
RUN chmod +x /usr/local/bin/entrypoint.sh

EXPOSE 80

ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Ã‰TAPE 2 : CRÃ‰ER .dockerignore
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CrÃ©er un fichier : .dockerignore

/node_modules
/public/hot
/public/storage
/storage/*.key
/vendor
.env
.env.backup
.phpunit.result.cache
Homestead.json
Homestead.yaml
npm-debug.log
yarn-error.log
/.idea
/.vscode
.git
.gitignore
.gitattributes
README.md
tests/
.editorconfig
docker/
Dockerfile

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš™ï¸ Ã‰TAPE 3 : CRÃ‰ER LA CONFIG NGINX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CrÃ©er le dossier et fichier : docker/nginx/nginx.conf

user www-data;
worker_processes auto;
pid /run/nginx.pid;

events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;

    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types text/plain text/css text/xml text/javascript 
               application/json application/javascript application/xml+rss 
               application/rss+xml font/truetype font/opentype 
               application/vnd.ms-fontobject image/svg+xml;

    server {
        listen 80;
        server_name _;
        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~ \.php$ {
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            include fastcgi_params;
        }

        location ~ /\.ht {
            deny all;
        }
    }
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ Ã‰TAPE 4 : CRÃ‰ER LA CONFIG SUPERVISOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CrÃ©er le fichier : docker/supervisor/supervisord.conf

[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:php-fpm]
command=/usr/local/sbin/php-fpm --nodaemonize
autostart=true
autorestart=true
stderr_logfile=/var/log/php-fpm.err.log
stdout_logfile=/var/log/php-fpm.out.log

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
stderr_logfile=/var/log/nginx.err.log
stdout_logfile=/var/log/nginx.out.log

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ Ã‰TAPE 5 : CRÃ‰ER LE SCRIPT ENTRYPOINT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CrÃ©er le fichier : docker/entrypoint.sh

#!/bin/sh
set -e

echo "Starting Laravel application..."

# Attendre que la base de donnÃ©es soit prÃªte (optionnel)
# if [ -n "$DB_HOST" ]; then
#     echo "Waiting for database..."
#     while ! nc -z $DB_HOST $DB_PORT; do
#         sleep 0.1
#     done
#     echo "Database is ready!"
# fi

# GÃ©nÃ©rer la clÃ© d'application si nÃ©cessaire
if [ -z "$APP_KEY" ]; then
    echo "Generating application key..."
    php artisan key:generate --force
fi

# ExÃ©cuter les migrations
echo "Running migrations..."
php artisan migrate --force

# Optimiser l'application
echo "Optimizing application..."
php artisan config:cache
php artisan route:cache
php artisan view:cache

# CrÃ©er le lien symbolique du storage
php artisan storage:link || true

# GÃ©nÃ©rer la documentation Swagger (optionnel)
php artisan l5-swagger:generate || true

echo "Application ready!"

# DÃ©marrer supervisor
exec /usr/bin/supervisord -c /etc/supervisor/conf.d/supervisord.conf

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Ã‰TAPE 6 : NE PAS CRÃ‰ER render.yaml (Blueprint = PAYANT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ IMPORTANT : Blueprint (render.yaml) est PAYANT (25$/mois minimum)

âœ… Solution GRATUITE : CrÃ©er le service manuellement sur Render Dashboard

Vous allez crÃ©er le Web Service directement dans l'interface Render
sans fichier render.yaml (voir Ã‰TAPE 9 pour la procÃ©dure complÃ¨te)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ—„ï¸ Ã‰TAPE 7 : BASE DE DONNÃ‰ES GRATUITE (SUPABASE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Option recommandÃ©e : Supabase (PostgreSQL gratuit illimitÃ©)

1. Aller sur : https://supabase.com
2. CrÃ©er un compte (gratuit)
3. New Project
4. RÃ©cupÃ©rer les credentials :
   - Host : db.xxx.supabase.co
   - Database : postgres
   - Port : 5432
   - User : postgres
   - Password : ton_password

5. Dans Render Dashboard â†’ Environment, ajouter :
   DB_HOST=db.xxx.supabase.co
   DB_PORT=5432
   DB_DATABASE=postgres
   DB_USERNAME=postgres
   DB_PASSWORD=ton_password_supabase

Alternatives gratuites :
- Neon : https://neon.tech (3 GB gratuit)
- ElephantSQL : https://elephantsql.com (20 MB gratuit)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª Ã‰TAPE 8 : TESTER LOCALEMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Build l'image Docker :
   docker build -t laravel-app .

2. Tester localement :
   docker run -p 8080:80 --env-file .env laravel-app

3. AccÃ©der Ã  : http://localhost:8080

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ Ã‰TAPE 9 : DÃ‰PLOYER SUR RENDER (GRATUIT - SANS BLUEPRINT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Pousser le code sur GitHub :
   git add .
   git commit -m "Add Docker configuration for Render"
   git push origin production

2. Sur Render Dashboard (https://dashboard.render.com) :
   
   a) CrÃ©er un nouveau Web Service :
      - Cliquer : New + â†’ Web Service
      - Connecter votre repository GitHub
      - SÃ©lectionner : Bayebaradiop/Project_Bancaire_laravel
      - Cliquer : Connect
   
   b) Configurer le service :
      - Name : project-laravel
      - Region : Frankfurt (Europe Central)
      - Branch : production
      - Root Directory : (laisser vide)
      - Environment : Docker
      - Plan : Starter ($0/month) â† GRATUIT
   
   c) Cliquer : Create Web Service

3. Configurer les variables d'environnement :
   - Dans votre service â†’ Environment (menu gauche)
   - Ajouter ces variables :
   
   APP_KEY=base64:/0NHaUg5A+twwjwa45GPqJM7IlYU5S+dfiQDcGGw2xk=
   APP_ENV=production
   APP_DEBUG=false
   APP_URL=https://project-laravel.onrender.com
   LOG_CHANNEL=stderr
   LOG_LEVEL=info
   
   DB_CONNECTION=pgsql
   DB_HOST=db.xxx.supabase.co          â† De Supabase
   DB_PORT=5432
   DB_DATABASE=postgres
   DB_USERNAME=postgres
   DB_PASSWORD=votre_password_supabase  â† De Supabase
   
   CACHE_DRIVER=file
   QUEUE_CONNECTION=database
   SESSION_DRIVER=file
   
   - Cliquer : Save Changes

4. Le dÃ©ploiement dÃ©marre automatiquement (5-10 min)
   - Suivre les logs en temps rÃ©el dans l'onglet "Logs"

5. API accessible Ã  :
   https://project-laravel.onrender.com/api/v1/comptes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ STRUCTURE DES FICHIERS Ã€ CRÃ‰ER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

project_laravel/
â”œâ”€â”€ Dockerfile                          # Image Docker
â”œâ”€â”€ .dockerignore                       # Fichiers Ã  ignorer
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ nginx/
â”‚   â”‚   â””â”€â”€ nginx.conf                  # Config Nginx
â”‚   â”œâ”€â”€ supervisor/
â”‚   â”‚   â””â”€â”€ supervisord.conf            # Config Supervisor
â”‚   â””â”€â”€ entrypoint.sh                   # Script de dÃ©marrage
â”œâ”€â”€ app/
â”œâ”€â”€ config/
â”œâ”€â”€ database/
â””â”€â”€ ...

âš ï¸ PAS de render.yaml (Blueprint = payant 25$/mois)
âœ… Configuration manuelle sur Render Dashboard (GRATUIT)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CHECKLIST DE DÃ‰PLOIEMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ CrÃ©er Dockerfile
â–¡ CrÃ©er .dockerignore
â–¡ CrÃ©er docker/nginx/nginx.conf
â–¡ CrÃ©er docker/supervisor/supervisord.conf
â–¡ CrÃ©er docker/entrypoint.sh (chmod +x)
â–¡ CrÃ©er compte Supabase (base de donnÃ©es gratuite)
â–¡ Tester localement avec Docker
â–¡ Pousser sur GitHub (branche production)
â–¡ CrÃ©er Web Service manuellement sur Render (GRATUIT)
â–¡ Configurer variables d'environnement (dont Supabase)
â–¡ VÃ©rifier le dÃ©ploiement et tester l'API

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’° COÃ›T TOTAL : 0â‚¬/MOIS (GRATUIT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- Render Web Service (Starter) : GRATUIT
- Supabase PostgreSQL : GRATUIT (500 MB)
- Total : 0â‚¬

Limitations :
- Service en veille aprÃ¨s 15 min d'inactivitÃ©
- Premier appel aprÃ¨s veille : ~30 secondes
- 750 heures/mois (24/7 possible)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ COMMANDES UTILES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Build Docker
docker build -t laravel-app .

# Run local
docker run -p 8080:80 --env-file .env laravel-app

# Voir les logs
docker logs <container_id>

# Entrer dans le container
docker exec -it <container_id> sh

# Push sur GitHub
git add .
git commit -m "Docker + Render config"
git push origin production

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“– RESSOURCES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- Render Docs : https://render.com/docs
- Supabase : https://supabase.com/docs
- Docker Laravel : https://laravel.com/docs/10.x/deployment

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
